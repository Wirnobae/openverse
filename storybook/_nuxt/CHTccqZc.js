import{u as R}from"./lEZE49IS.js";import{u as y}from"./CFYL8r3V.js";import{u as L}from"./BC9BnLXc.js";import{v as T}from"./DuePtXgb.js";import{s as w}from"./CnlriU-7.js";import{b as P}from"./DSIC1A7N.js";import{u as V,a as B}from"./CnOclXYv.js";import{V as C}from"./BY12SjvE.js";import{d as k,G as t,z as a,H as D,T as d,D as F,I as x,M as N,E as A,C as I,X as U,U as z}from"./B18F2_lz.js";const W=k({__name:"VLoadMore",props:{kind:{},searchTerm:{},relatedTo:{},searchType:{},isFetching:{type:Boolean}},emits:["load-more"],setup(m,{emit:f}){const s=m,p=f,r=t(null),v=L(),{t:n}=R({useScope:"global"}),l=V(),g=B(),{$sendCustomEvent:i}=y(),{currentPage:h}=w(l),c=a(()=>({...g.searchParamsForEvent,resultPage:h.value||1})),E=a(()=>l.canLoadMore),e=t(!1),b=async()=>{s.isFetching||(e.value=!1,i("LOAD_MORE_RESULTS",c.value),p("load-more"))},S=()=>{i("REACH_RESULT_END",c.value)},_=a(()=>s.isFetching?n("browsePage.loading"):n("browsePage.load")),u=t(null);D(()=>{u.value=document.getElementById("main-page")});const M=P(r,{scrollTarget:u});return d(v,()=>{e.value=!1}),d(M,o=>{if(o){if(e.value)return;S(),e.value=!0}}),(o,H)=>(F(),x("div",{ref_key:"loadMoreSectionRef",ref:r,class:"w-full"},[N(A(C,{class:"label-bold lg:description-bold h-16 w-full lg:h-18",variant:"filled-gray",size:"disabled",disabled:o.isFetching,"data-testid":"load-more",onClick:b},{default:I(()=>[U(z(_.value),1)]),_:1},8,["disabled"]),[[T,E.value]])],512))}});export{W as _};
