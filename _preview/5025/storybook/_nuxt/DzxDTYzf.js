import{_ as E}from"./fB7P6YnH.js";import{w as f,a as h,v as O}from"./TZ8H9kUZ.js";import{o as A}from"./CoPWYLvr.js";import{u as M}from"./CfZ9GF2a.js";import{V as z}from"./BHwUdJbU.js";import{_ as N}from"./BUNojBq_.js";import{_ as P}from"./OQ7_vLSz.js";import{d as q,W as D,I as b,C as i,w as G,K as L,Q,G as t,E as v,T,P as o,R as w,F as U,S as W,O as j}from"./lnpB3OcH.js";const te=q({inheritAttrs:!1,__name:"VSearchBar",props:{modelValue:{default:""},placeholder:{}},emits:["update:modelValue","submit","recent-hidden"],setup(x,{emit:y}){const _=x,a=y,g=D(),u=b(null),m=b(null),r=i({get:()=>_.modelValue??"",set:e=>{a("update:modelValue",e)}}),V=()=>{a("submit")},S=i(()=>"top-14"),C=()=>{var e;(e=m.value)==null||e.focusInput()},K=()=>{p.value.length||n()},{handleKeydown:B,handleSelect:R,handleClear:$,recent:{show:F,hide:n,isVisible:l,selectedIdx:c,entries:p}}=M({focusInput:C,term:r,isMobile:!1});A(u,n),G(l,e=>{e||a("recent-hidden")});const k=i(()=>{const{class:e,...s}=g;return s});return(e,s)=>{const I=E;return U(),L("div",{ref_key:"searchBarEl",ref:u,class:w(["relative",e.$attrs.class])},[Q("form",{action:"/search",role:"search",class:"search-bar group flex h-12 flex-row items-center rounded-sm border-tx bg-default",onSubmit:h(V,["prevent"])},[t(z,T({ref_key:"inputFieldRef",ref:m},k.value,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=d=>r.value=d),placeholder:e.placeholder||e.$t("hero.search.placeholder"),class:"search-field flex-grow border-tx bg-secondary text-secondary focus-within:bg-default focus:border-focus group-hover:bg-secondary group-hover:text-default group-hover:focus-within:bg-default","label-text":e.$t("search.searchBarLabel",{openverse:"Openverse"}),"connection-sides":["end"],"field-id":"search-bar",type:"search",autocomplete:"off",name:"q",role:"combobox","aria-autocomplete":"none","aria-expanded":o(l),"aria-controls":"recent-searches-list","aria-activedescendant":o(c)!==void 0?`option-${o(c)}`:void 0,onFocus:o(F),onKeydown:o(B)}),{default:v(()=>[W(e.$slots,"default")]),_:3},16,["modelValue","placeholder","label-text","aria-expanded","aria-activedescendant","onFocus","onKeydown"]),t(N,{type:"submit",route:"search",onKeydown:f(h(K,["exact"]),["tab"])},null,8,["onKeydown"])],32),t(I,null,{default:v(()=>[j(t(P,{"selected-idx":o(c),entries:o(p),class:w(["absolute inset-x-0 z-popover lg:flex",S.value]),onSelect:o(R),onClear:s[1]||(s[1]=d=>o($)(d)),onKeydown:f(o(n),["tab"])},null,8,["selected-idx","entries","class","onSelect","onKeydown"]),[[O,o(l)]])]),_:1})],2)}}});export{te as _};
