import{u as M}from"./DKepsN1e.js";import{u as w}from"./BNurbrIm.js";import{u as y}from"./D-c0xjtQ.js";import{v as L}from"./TZ8H9kUZ.js";import{s as T}from"./BInFDkJi.js";import{b as V}from"./CoPWYLvr.js";import{u as P,a as B}from"./BJ-KpVIG.js";import{V as C}from"./DuVMw8T-.js";import{d as F,I as t,C as a,J as k,w as d,F as x,K as D,O as N,G as A,E as I,Y as O,V as U}from"./lnpB3OcH.js";const W=F({__name:"VLoadMore",props:{kind:{},searchTerm:{},relatedTo:{},searchType:{},isFetching:{type:Boolean}},emits:["load-more"],setup(m,{emit:f}){const s=m,p=f,r=t(null),v=y(),{t:n}=M({useScope:"global"}),l=P(),g=B(),{$sendCustomEvent:i}=w(),{currentPage:h}=T(l),c=a(()=>({...g.searchParamsForEvent,resultPage:h.value||1})),E=a(()=>l.canLoadMore),e=t(!1),b=async()=>{s.isFetching||(e.value=!1,i("LOAD_MORE_RESULTS",c.value),p("load-more"))},S=()=>{i("REACH_RESULT_END",c.value)},_=a(()=>s.isFetching?n("browsePage.loading"):n("browsePage.load")),u=t(null);k(()=>{u.value=document.getElementById("main-page")});const R=V(r,{scrollTarget:u});return d(v,()=>{e.value=!1}),d(R,o=>{if(o){if(e.value)return;S(),e.value=!0}}),(o,z)=>(x(),D("div",{ref_key:"loadMoreSectionRef",ref:r,class:"w-full"},[N(A(C,{class:"label-bold lg:description-bold h-16 w-full lg:h-18",variant:"filled-gray",size:"disabled",disabled:o.isFetching,"data-testid":"load-more",onClick:b},{default:I(()=>[O(U(_.value),1)]),_:1},8,["disabled"]),[[L,E.value]])],512))}});export{W as _};
