import{u as N}from"./BNurbrIm.js";import{f as S,v as b}from"./Xs_VBmP5.js";import{h as T}from"./BJ-KpVIG.js";import{u as B,s as n}from"./DYcLt-QY.js";import{u as U}from"./ewjUEeyD.js";import{u as H}from"./CnfNh8zc.js";import{u as M}from"./D-c0xjtQ.js";import{u as O,_ as V,a as F,b as z}from"./Bx-94P6I.js";import{b as G}from"./CRWjC3CT.js";import{s as K}from"./BOX21o1p.js";import{u as L}from"./CtE17snF.js";import{u as Q}from"./11sm9IB6.js";import{u as j}from"./BM6hZmfi.js";import{_ as q}from"./D8XoqxtO.js";import{_ as J}from"./ZrJcEh1G.js";import{_ as W}from"./CimQOpfe.js";import{_ as X}from"./Ctn8Cwav.js";import{_ as Y}from"./CCu0MygQ.js";import{d as Z,C as h,I as tt,ah as ot,w as et,F as i,K as d,D as f,L as x,P as c,T as it,G as m,Q as y,E as at,N as w}from"./lnpB3OcH.js";import"./BInFDkJi.js";import"./BvLt3-_D.js";import"./CFMQYC2y.js";import"./Dt-H8hG_.js";import"./CTON8dBl.js";import"./CoPWYLvr.js";import"./Cpj98o6Y.js";import"./Ci7G4jyV.js";import"./PgLs4BFy.js";import"./D0ww02ZN.js";import"./wqDFrKMd.js";import"./DToSwJe0.js";import"./CVtkxrq9.js";import"./D46q-qR7.js";import"./TZ8H9kUZ.js";import"./yH-X360_.js";import"./CxzAXwOf.js";import"../sb-preview/runtime.js";import"./Bz7P8nyL.js";import"./bOkDOO5J.js";import"./BSEdKPgk.js";import"./DKepsN1e.js";import"./BsB6Edd_.js";import"./k58JPKRZ.js";import"./-sXwcokL.js";import"./fl49u9nx.js";import"./DlAUqK2U.js";import"./CX_gbysc.js";import"./ZjNmaQpL.js";import"./CuPsdpTl.js";import"./BKgXXsC6.js";import"./DH-KChwL.js";import"./Bnkvtx4f.js";import"./BZqkjP4b.js";import"./B887uWEI.js";import"./DyOEVqiO.js";import"./DQnMOLSw.js";import"./Do2yKSxf.js";import"./DuVMw8T-.js";import"./lB3mzJYA.js";import"./Bv8nrUnc.js";import"./DIGrdIlp.js";import"./BPxqI6a1.js";import"./-TaKdCZx.js";import"./-zoqqjDg.js";import"./B_2Noz0c.js";import"./CV5aTZXU.js";import"./Dd0rXUjN.js";import"./RevM6cLn.js";import"./DJ0mSPh7.js";import"./CbZnFNTe.js";import"./DtGhSdeD.js";import"./BsSU7JKo.js";import"./BK2_z56-.js";import"./BS9R2VWD.js";import"./LibdVWSb.js";import"./DinEHs6j.js";import"./CKw8RqDS.js";import"./Ct6kK6vF.js";import"./Box5JfbC.js";import"./DYaXnAuU.js";import"./4pe4-dmi.js";import"./CdeBVJGP.js";import"./86gNHKjF.js";import"./DC-AD4tD.js";const rt=["id"],mt={class:"mx-auto mt-10 flex flex-col gap-10 px-6 lg:mt-16 lg:max-w-5xl lg:gap-16"},st={class:"h-[75px] w-[75px] flex-none overflow-hidden rounded-sm lg:h-30 lg:w-30"},Vo=Z({name:"AudioDetailPage",__name:"index",async setup(pt){var g;let s,v;j();const a=B(),u=M(),e=h(()=>S(u==null?void 0:u.params.id)),A=N();(!e.value||!b(e.value))&&n({statusCode:404,message:`Invalid audio id: "${e.value}".`,fatal:!0});const t=tt((g=a.audio)!=null&&g.id&&e.value&&a.audio.id===e.value?a.audio:null),r=h(()=>a.fetchState.fetchingError),{isHidden:C,reveal:I}=Q(t.value),{pageTitle:k,detailPageMeta:E}=O(t);H(()=>({...E,title:k.value}));const{sendCustomEvent:$}=L(),D=(o,p)=>{$("AUDIO_INTERACTION",{...o,component:p})},R=async()=>{if(A.isHydrating)return t.value;const o=await a.fetch(G,e.value);if(o)return t.value=o,o;throw new Error(`Could not fetch audio with id ${e.value}`)},{error:l}=([s,v]=ot(async()=>U("single-audio",async()=>await R(),{lazy:!0,server:!1})),s=await s,v(),s),_=o=>{["Audio not found","Audio ID not found"].includes(o.message)&&n({statusCode:404,message:"Audio ID not found",fatal:!0}),r.value&&!T(r.value)&&n({...r.value??{},fatal:!0})};return l.value&&_(l.value),et(l,o=>{o&&_(o)}),(o,p)=>(i(),d("main",{id:c(K),tabindex:"-1",class:"relative flex-grow"},[r.value?(i(),f(Y,{key:0,"fetching-error":r.value,class:"px-6 py-10 lg:px-10"},null,8,["fetching-error"])):t.value?(i(),d(x,{key:1},[c(C)?(i(),f(W,it({key:0},t.value,{onReveal:c(I)}),null,16,["onReveal"])):(i(),d(x,{key:1},[m(V,{media:t.value},null,8,["media"]),m(q,{layout:"full",audio:t.value,class:"main-track",onInteracted:p[0]||(p[0]=P=>D(P,"AudioDetailPage"))},null,8,["audio"]),y("div",mt,[m(J,{media:t.value},null,8,["media"]),m(F,{media:t.value},{thumbnail:at(()=>[y("div",st,[m(X,{audio:t.value},null,8,["audio"])])]),_:1},8,["media"]),t.value?(i(),f(z,{key:0,"media-type":"audio","related-to":t.value.id,class:"mb-12"},null,8,["related-to"])):w("",!0)])],64))],64)):w("",!0)],8,rt))}});export{Vo as default};
