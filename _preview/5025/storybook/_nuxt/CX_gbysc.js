import{u as z}from"./DKepsN1e.js";import{u as W}from"./BNurbrIm.js";import{I as S,C as n,d as j,K as T,G as _,E as H,R as r,ag as P,P as l,F as w,Q as u,V as k,L as U,Y as M,D as N}from"./lnpB3OcH.js";import{u as D}from"./11sm9IB6.js";import{I as F}from"./CRWjC3CT.js";import{a as G}from"./BJ-KpVIG.js";import{V as K}from"./ZjNmaQpL.js";import{V as O}from"./BKgXXsC6.js";import{_ as Q}from"./CtE17snF.js";import"./CFMQYC2y.js";const C=3/4,y=16/9,Y=21/9,J=250,X=J/y,I=250,R=100,Z=o=>o>y?y:o<C?C:o,ee=({imageSize:o,isSquare:e})=>{const c=S(e.value?I:o.height||R),i=S(e.value?I:o.width||R),m=n(()=>i.value/c.value),d=n(()=>m.value>Y),h=n(()=>{const v={};if(e.value)return v;const g=m.value,p=Z(g),f=Math.round(p*X);return{"--container-width":`${f}px`,"--container-grow":f,"--img-aspect-ratio":p}});return{imgHeight:c,imgWidth:i,isPanorama:d,styles:h}},te=""+new URL("image_not_available_placeholder.BTm11Bgh.png",import.meta.url).href,se=["alt","src","width","height"],ie={class:"sr-only"},ae={class:"label-regular leading-none text-secondary group-hover:text-default group-focus-visible:text-default sm:text-default"},fe=j({__name:"VImageCell",props:{kind:{default:"search"},searchTerm:{},relatedTo:{default:"null"},image:{},aspectRatio:{default:"square"}},setup(o){const e=o,c=(t,s="https://")=>t.startsWith("http://")||t.startsWith("https://")?t:`${s}${t}`,i=n(()=>e.aspectRatio==="square"),{imgHeight:m,imgWidth:d,isPanorama:h,styles:v}=ee({imageSize:{width:e.image.width,height:e.image.height},isSquare:i}),{t:g}=z({useScope:"global"}),p=n(()=>{if(h.value)return c(e.image.url);const t=e.image.thumbnail||e.image.url;return c(t)}),f=n(()=>`/image/${e.image.id}/${e.searchTerm?"?q="+e.searchTerm:""}`),$=t=>{const s=t.target;s.src=s.src===e.image.url?te:e.image.url},E=t=>{if(e.aspectRatio==="square")return;const s=t.target;m.value=s.naturalHeight,d.value=s.naturalWidth},x=g("browsePage.aria.imageTitle",{title:e.image.title}),V=n(()=>a.value?g("sensitiveContent.title.image"):x),A=n(()=>a.value?void 0:x),{$sendCustomEvent:B}=W(),b=G(),L=t=>{var s;t.button===0&&B("SELECT_SEARCH_RESULT",{id:e.image.id,kind:e.kind,mediaType:F,provider:e.image.provider,query:e.searchTerm||"",relatedTo:e.relatedTo??"null",sensitivities:((s=e.image.sensitivity)==null?void 0:s.join(","))??"",isBlurred:a.value??"null",collectionType:b.strategy!=="default"?b.strategy:"null",collectionValue:b.collectionValue??"null"})},{isHidden:a}=D(e.image);return(t,s)=>(w(),T("li",{style:P(l(v)),class:r(["container w-full max-w-full",i.value?"square":"intrinsic sm:w-[--container-width] sm:flex-grow-[--container-grow]"])},[_(Q,{itemprop:"contentUrl",title:A.value,href:f.value,class:r(["image-link group relative block w-full overflow-hidden rounded-sm text-gray-2 hover:no-underline",i.value?"focus-visible:focus-bold-filled":"focus-slim-tx focus-visible:-m-2 focus-visible:w-[calc(100%+theme(spacing.4))] focus-visible:p-2 sm:focus-visible:m-0 sm:focus-visible:w-full sm:focus-visible:p-0 focus-visible:sm:focus-bold-filled"]),"aria-label":V.value,onMousedown:L},{default:H(()=>[u("figure",{itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject",class:r(["grid w-full rounded-sm",{"aspect-square":i.value}])},[u("img",{loading:"lazy",class:r(["image col-span-full row-span-full block w-full overflow-hidden rounded-sm object-cover",[i.value?"h-full":"margin-auto sm:aspect-[--img-aspect-ratio]"]]),alt:l(a)?`${t.$t("sensitiveContent.title.image")}`:t.image.title,src:p.value,width:l(d),height:l(m),itemprop:"thumbnailUrl",onLoad:E,onError:s[0]||(s[0]=q=>$(q))},null,42,se),u("span",{class:r(["col-span-full row-span-full flex items-center justify-center bg-blur text-default backdrop-blur-xl duration-200 motion-safe:transition-opacity",l(a)?"opacity-100":"opacity-0"]),"data-testid":"blur-overlay","aria-hidden":"true"},[_(K,{name:"eye-closed"})],2),u("figcaption",{class:r(["z-10 col-span-full mt-2 self-end justify-self-start rounded-sm text-default group-hover:visible group-focus-visible:visible sm:mb-2",[i.value?"invisible row-span-full p-2":"sm:invisible sm:row-span-full sm:p-2",l(a)?"sm:w-full sm:text-center":"bg-default",!l(a)&&(i.value?"mx-2":"sm:mx-2")]])},[u("h2",ie,k(l(a)?`${t.$t("sensitiveContent.title.image")}`:t.image.title),1),u("div",ae,[l(a)?(w(),T(U,{key:0},[M(k(t.$t("sensitiveContent.singleResult.title")),1)],64)):(w(),N(O,{key:1,license:t.image.license,"hide-name":!0},null,8,["license"]))])],2)],2)]),_:1},8,["title","href","class","aria-label"])],6))}});export{fe as _,te as e};
